<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-JZZ8MZ92EX"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
        
          gtag('config', 'G-JZZ8MZ92EX');
        </script>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="A dumb and basic tool to simply generate charts using the provided data with minimal customization options." />
        <meta name="author" content="Shahroz Naeem">
        <title>The Chart Tool</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/ComboChart.png" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
        <!-- Handsontable Styling-->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.css" />
        <!-- Toastify Styling -->
        <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
        <!-- Custom Style definitions-->
        <style>
            .full-width {
                width: 100%;
            }
            .ce-block__content,
            .ce-toolbar__content {
                max-width: unset;
            }

            .bg-grad-blue {
                --bs-bg-opacity: 1;
                background: rgb(9,71,121);
                background: linear-gradient(126deg, #094779 35%, #0063ff 100%);
            }
            .bg-grad-green {
                background: rgb(29,151,108);
                background: linear-gradient(126deg, #1d976c 35%, #93f9b9 100%);
            }
            .bg-grad-teal {
                background: rgb(34,175,171);
                background: linear-gradient(126deg, #22afab 35%, #a1ecfb 100%);
            }
            .bg-grad-orange {
                background: rgb(253,200,48);
                background: linear-gradient(126deg,#f37335 35%, #fdc830 100%);
            }
            .bg-grad-red {
                background: rgb(237,33,58);
                background: linear-gradient(126deg, #93291e 35%, #ed213a 100%);
            }
            .bg-grad-light {
                background: rgb(236,233,230);
                background: linear-gradient(126deg, #ece9e6 35%, #ffffff 100%);
            }
            .bg-grad-dark {
                background: rgb(40,40,40);
                background: linear-gradient(126deg, #282828 35%, #4b4b4b 100%);
            }
        </style>
    </head>
    <body >
        <div class="d-flex" id="wrapper">
            <!-- Sidebar-->
            <div class="border-end bg-white" id="sidebar-wrapper">
                <div class="sidebar-heading border-bottom bg-light">The Chart Tool</div>
                <div class="list-group list-group-flush">
                    <div class="accordion" id="accordionOptions">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="optionSetOne">
                              <button class="accordion-button " type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
                                Data Options
                              </button>
                            </h2>
                            <div id="collapseTwo" class="accordion-collapse  collapse show" aria-labelledby="optionSetOne" data-bs-parent="#accordionOptions">
                              <div class="accordion-body">
                                <label for="updateHeaderBtn" class="small">Update the headers of the data grid with what's in Row 1 in order to use the filter options.</label>
                                <button class="btn btn-outline-primary btn-sm full-width shadow-sm" onclick="updateHeaders()" data-toggle="tooltip" 
                                    title="Updates the headers of the datagrid with whatever's in row 1." id="updateHeaderBtn">
                                    <i class="bi bi-bar-chart-line-fill"></i> Update Headers
                                </button>
                                <div class="form-check mt-2" data-toggle="tooltip" title="Automatically update the headers whenever anything is pasted (Ctrl/CMD+V) in the grid.">
                                    <input class="form-check-input" type="checkbox" value="" id="autoHeaderUpdateCheck">
                                    <label class="form-check-label" for="autoHeaderUpdateCheck">
                                      Auto update on paste
                                    </label>
                                  </div>
                              </div>
                            </div>
                          </div>
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="optionSetTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                    Visual Options
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="optionSetTwo" data-bs-parent="#accordionOptions">
                                <div class="accordion-body">
                                    <label for="chartType" class="small">Chart Type</label>
                                    <select onchange="onChartTypeChange(this.value)" id="chartType" class="form-select mb-3 form-select-sm">
                                        <option value="line">Line</option>
                                        <option value="bar">Bar</option>
                                        <option value="area">Area</option>
                                        <option value="doughnut">Donut</option>
                                        <option value="pie">Pie</option>
                                        <option value="polarArea">Polar Area</option>
                                    </select>
                                
                                    <label for="chartBackground" class="small">Chart Background</label>
                                    <select id="chartBackground" class="form-select mb-3 form-select-sm">
                                        <option value="bg-grad-blue">Blue</option>
                                        <option value="bg-grad-green">Green</option>
                                        <option value="bg-grad-teal">Teal</option>
                                        <option value="bg-grad-orange">Orange</option>
                                        <option value="bg-grad-red">Red</option>
                                        <option value="bg-secondary">Gray</option>
                                        <option value="bg-grad-light" selected>Light</option>
                                        <option value="bg-grad-dark">Dark</option>
                                    </select>
                                
                                    <label for="chartTheme" class="small">Chart Theme</label>
                                    <select id="chartTheme" class="form-select mb-3 form-select-sm">
                                        <option value="light">Light</option>
                                        <option value="dark">Dark</option>
                                    </select>
                                
                                    <label for="chartTitle" class="small">Chart Title</label>
                                    <input type="text" id="chartTitle" class="form-control mb-3 form-control-sm" placeholder="Enter chart title">
                                
                                    <label for="chartSubtitle" class="small">Chart Subtitle</label>
                                    <input type="text" id="chartSubtitle" class="form-control mb-3 form-control-sm" placeholder="Enter chart subtitle">
                                
                                    <label for="legendPosition" class="small">Legend Position</label>
                                    <select id="legendPosition" class="form-select form-select-sm">
                                        <option value="top">Top</option>
                                        <option value="right">Right</option>
                                        <option value="bottom">Bottom</option>
                                        <option value="left">Left</option>
                                    </select>
                                    <p class="small mb-3 text-primary"><small id="legendRecommendation"></small></p>

                                    <label for="chartHeight" class="small">Chart Height</label>
                                    <input type="range" id="chartHeight" class="form-range" min="100" max="800" value="400" step="50" data-toggle="tooltip" title="Adjust the height of the chart - 50px intervals.">
                                    <label for="chartWidth" class="small">Chart Width</label>
                                    <input oninput="onChartWidthChange(this.value)" type="range" id="chartWidth" class="form-range" min="2" max="12" value="12" step="2" data-toggle="tooltip" title="Adjust the width of the chart - this adjusts the bootstrap grids rather than the width property.">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="list-group-item list-group-item-light p-3">
                        <hr>
                        <button class="btn btn-outline-primary btn-sm full-width shadow-sm" onclick="plotChart()" data-toggle="tooltip" title="Plots a new chart using the data and settings provided."><i class="bi bi-bar-chart-line-fill"></i> Plot</button>
                        <button id="analyzeBtn" class="btn btn-outline-primary btn-sm mt-3 full-width shadow-sm" onclick="analyzeData()" data-toggle="tooltip" title="Analyzes the data to provide basic insights - nothing fancy and may be inaccurate.">⚡ Analyze</button>
                        <button id="downloadBtn" class="btn btn-outline-success btn-sm mt-3 full-width shadow-sm" onclick="downloadChart()" data-toggle="tooltip" title="Downloads a png of the chart."><i class="bi bi-download"></i> Download Chart</button>
                        <hr>
                        <button class="btn btn-outline-secondary btn-sm full-width shadow-sm" onclick="addDummyData()" data-toggle="tooltip" title="Adds dummy information in the grid." ><i class="bi bi-clipboard-data-fill"></i> Add Dummy Data</button>
                    </div>
                </div>
            </div>
            <!-- Page content wrapper-->
            <div id="page-content-wrapper">
                <!-- Top navigation-->
                <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                    <div class="container-fluid">
                        <button class="btn btn-outline-dark btn-sm" id="sidebarToggle">
                            <!-- &equiv; -->
                            <i class="bi bi-menu-button"></i>
                        </button>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav ms-auto mt-2 mt-lg-0">
                                <li class="nav-item"><a class="btn btn-outline-secondary btn-sm mt-1 mb-1" href="#" data-bs-toggle="modal" data-bs-target="#creditsModal">How's this built?</a></li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <!-- Page content-->
                <div class="container-fluid">
                    <h1 class="mt-4 h3">Hi there! 👋</h1>
                    <p>Just dump your data in the grid below (copy & paste works great from a spreadsheet,) adjust the visual options to your liking 
                        and hit "<i class="bi bi-bar-chart-line-fill"></i> Plot" to draw a chart and then "⚡Analyze" to see the (weak) magic 
                        happen!</p>
                    <div class="alert alert-primary" role="alert">
                        <p>
                            Column A will be used for x axis and Row 1 will be treated as headers in the tool's current state. You can use the 
                            "<i class="bi bi-clipboard-data-fill"></i> Add Dummy Data" button on the bottom left to se generate dummy data 
                            that's acceptable. You can also add/remove rows/columns via the context menu on the data grid. (Ctrl+Z works pretty well as well!)
                        </p>
                        <p>
                            We recommend that you remove any empty columns and rows for the best results. 
                        </p>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="row">
                            <div class="d-flex mb-4">
                                <h2 class="h4 mb-0 text-gray-1000">Data</h2>
                                
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-12 col-md-12 col-xl-12 col-lg-12">
                                <div id="datagrid" class=""></div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="row mb-5">
                        <div id="contentColumn" class="col-12">
                            <div id="contentContainer" class="rounded p-3">
                                <div>
                                    <canvas id="theChart" style="height: 400px;" class="rounded"></canvas>
                                </div>
                                <div id="analysisResults" class="mt-2 text-white"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- FOOTER -->
        <nav class="navbar bg-light text-dark">
            <div class="mx-3 small">
              &copy; <script>document.write(new Date().getFullYear())</script> The Chart Tool 
              • View the source @ <a href="https://github.com/shahrozn/thecharttool">shahrozn/thecharttool</a>
              
            </div>
        </nav>
        <!-- POPUP MODAL FOR CREDITS -->
        <div class="modal fade" id="creditsModal" tabindex="-1" role="dialog" aria-labelledby="creditsModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="creditsModalLabel">How's this built? 🤔</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close">
                        </button>
                    </div>
                    <div class="modal-body">
                        <p><i class="bi bi-arrow-right"></i> Bootstrap Theme by <a href="https://startbootstrap.com/">StartBootstrap</a> </p>
                        <p><i class="bi bi-arrow-right"></i> Spreadsheet Grid by <a href="https://handsontable.com/">Handsontable</a> </p>
                        <p><i class="bi bi-arrow-right"></i> Charts by <a href="https://www.chartjs.org/">Chart.js</a> </p>
                        <p><i class="bi bi-arrow-right"></i> Trend analysis by <a href="https://simple-statistics.github.io/">Simple Statistics</a> </p>
                        <p><i class="bi bi-arrow-right"></i> Insights Composer by <a href="https://editorjs.io/">Editor.js</a> </p>
                        <hr>
                        <p><i class="bi bi-arrow-right"></i> View the source @ <a href="https://github.com/shahrozn/thecharttool">shahrozn/thecharttool</a> </p>
                        
                        
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
        <!-- Data Handling JS -->
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://unpkg.com/simple-statistics@7.8.3/dist/simple-statistics.min.js"></script>
        <!-- Image Download JS -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/dom-to-image/2.6.0/dom-to-image.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
        <!-- Editor JS -->
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@latest"></script>
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/header@latest"></script>
        <script src="https://cdn.jsdelivr.net/npm/editorjs-paragraph-with-alignment@3.0.0"></script>
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/embed@latest"></script>
        <script src="https://cdn.jsdelivr.net/npm/@editorjs/delimiter@latest"></script>
        <!-- Toastify -->
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
        <!-- Core Tool JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
